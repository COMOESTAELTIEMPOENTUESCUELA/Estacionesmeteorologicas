<!DOCTYPE html>
<html lang="es">
<head>
Â  <meta charset="UTF-8">
Â  <title>Mapa de Estaciones MeteorolÃ³gicas</title>
Â  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
Â  <style>
Â  Â  #map { height: 500px; margin-bottom: 20px; }
Â  Â  #estacion-stats { display: flex; flex-wrap: wrap; gap: 15px; }
Â  Â  .stat-box {
Â  Â  Â  border: 1px solid #ccc;
Â  Â  Â  border-radius: 8px;
Â  Â  Â  padding: 10px;
Â  Â  Â  width: 250px;
Â  Â  Â  background: #f9f9f9;
Â  Â  Â  box-shadow: 2px 2px 5px rgba(0,0,0,0.1);
Â  Â  }
Â  </style>
</head>
<body>
Â  <h2>Mapa de Estaciones MeteorolÃ³gicas</h2>
Â  <div id="map"></div>
Â  <div id="estacion-stats"></div>

Â  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
Â  <!-- Importa las bibliotecas de Firebase que necesitas -->
Â  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
Â  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
Â  
Â  <script>
Â  Â  // Tu configuraciÃ³n de Firebase
Â  Â  const firebaseConfig = {
Â  Â  Â  apiKey: "AIzaSyATmTQp3YQVfifKoiP32tlSHI6oJ6YHlfc",
Â  Â  Â  authDomain: "pagina-comoestaeltiempo.firebaseapp.com",
Â  Â  Â  databaseURL: "https://pagina-comoestaeltiempo-default-rtdb.firebaseio.com",
Â  Â  Â  projectId: "pagina-comoestaeltiempo",
Â  Â  Â  storageBucket: "pagina-comoestaeltiempo.firebasestorage.app",
Â  Â  Â  messagingSenderId: "199504545352",
Â  Â  Â  appId: "1:199504545352:web:199240334c0f96ce983a7d",
Â  Â  Â  measurementId: "G-5V1XR8TMN5"
Â  Â  };

Â  Â  // Inicializa Firebase
Â  Â  firebase.initializeApp(firebaseConfig);
Â  Â  const database = firebase.database();

Â  Â  const map = L.map('map').setView([-34.921, -57.955], 11);

Â  Â  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
Â  Â  Â  attribution: 'Â© OpenStreetMap'
Â  Â  }).addTo(map);

Â  Â  // Referencia a la raÃ­z de tus datos de estaciones en Firebase
Â  Â  // Asume que la estructura en Firebase serÃ¡ similar a:
Â  Â  // estaciones/
Â  Â  //   - estacion1/
Â  Â  //     - nombre: "EstaciÃ³n UNLP"
Â  Â  //     - lat: -34.921
Â  Â  //     - lon: -57.955
Â  Â  //     - temperatura: 25.5
Â  Â  //     - humedad: 70
Â  Â  const estacionesRef = database.ref('estaciones');

Â  Â  // Escucha en tiempo real los cambios en la base de datos
Â  Â  estacionesRef.on('value', (snapshot) => {
Â  Â  Â  // Obtiene todos los datos de las estaciones
Â  Â  Â  const estacionesData = snapshot.val();
Â  Â  Â  if (estacionesData) {
Â  Â  Â  Â  // Limpia los marcadores y las estadÃ­sticas para evitar duplicados
Â  Â  Â  Â  document.getElementById("estacion-stats").innerHTML = "";
Â  Â  Â  Â  map.eachLayer((layer) => {
Â  Â  Â  Â  Â  if (layer instanceof L.Marker) {
Â  Â  Â  Â  Â  Â  map.removeLayer(layer);
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });

Â  Â  Â  Â  // Itera sobre cada estaciÃ³n y agrega los marcadores y las estadÃ­sticas
Â  Â  Â  Â  Object.keys(estacionesData).forEach(estacionId => {
Â  Â  Â  Â  Â  const estacion = estacionesData[estacionId];
Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  // AsegÃºrate de que los datos tienen latitud y longitud
Â  Â  Â  Â  Â  if (estacion.lat && estacion.lon) {
Â  Â  Â  Â  Â  Â  const marker = L.marker([estacion.lat, estacion.lon]).addTo(map);
Â  Â  Â  Â  Â  Â  marker.bindPopup(`<b>${estacion.nombre}</b><br>Temp: ${estacion.temperatura} Â°C<br>Humedad: ${estacion.humedad} %`);
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  document.getElementById("estacion-stats").innerHTML += `
Â  Â  Â  Â  Â  Â  Â  <div class="stat-box">
Â  Â  Â  Â  Â  Â  Â  Â  <b>${estacion.nombre}</b><br>
Â  Â  Â  Â  Â  Â  Â  Â  ğŸŒ¡ï¸ Temp: ${estacion.temperatura} Â°C<br>
Â  Â  Â  Â  Â  Â  Â  Â  ğŸ’§ Humedad: ${estacion.humedad} %
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });
Â  Â  Â  }
Â  Â  });
Â  </script>
</body>
</html>
